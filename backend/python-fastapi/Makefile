# Agent Table FastAPI åç«¯ - Makefile

# é»˜è®¤ç›®æ ‡
.PHONY: help
help:
	@echo "Agent Table FastAPI åç«¯ - å¼€å‘å‘½ä»¤"
	@echo ""
	@echo "å‘½ä»¤åˆ—è¡¨:"
	@echo "  setup-uv     - ä½¿ç”¨ uv è®¾ç½®å¼€å‘ç¯å¢ƒ"
	@echo "  dev-uv       - ä½¿ç”¨ uv å¯åŠ¨å¼€å‘æœåŠ¡å™¨"
	@echo "  test         - è¿è¡Œæµ‹è¯•"
	@echo "  format       - æ ¼å¼åŒ–ä»£ç "
	@echo "  lint         - ä»£ç æ£€æŸ¥"
	@echo "  type-check   - ç±»å‹æ£€æŸ¥"
	@echo "  clean        - æ¸…ç†ä¸´æ—¶æ–‡ä»¶"
	@echo "  install-uv   - å®‰è£… uv (å¦‚æœå°šæœªå®‰è£…)"

# å®‰è£… uv
.PHONY: install-uv
install-uv:
	@echo "ğŸ“¦ å®‰è£… uv..."
	pip install uv

# ä½¿ç”¨ uv è®¾ç½®å¼€å‘ç¯å¢ƒ
.PHONY: setup-uv
setup-uv:
	@echo "ğŸ”§ ä½¿ç”¨ uv è®¾ç½®å¼€å‘ç¯å¢ƒ..."
	./scripts/setup_with_uv.sh

# ä½¿ç”¨ uv å¯åŠ¨å¼€å‘æœåŠ¡å™¨
.PHONY: dev-uv
dev-uv:
	@echo "ğŸš€ ä½¿ç”¨ uv å¯åŠ¨å¼€å‘æœåŠ¡å™¨..."
	./scripts/dev_with_uv.sh

# è¿è¡Œæµ‹è¯•
.PHONY: test
test:
	@echo "ğŸ§ª è¿è¡Œæµ‹è¯•..."
	uv run pytest

# æ ¼å¼åŒ–ä»£ç 
.PHONY: format
format:
	@echo "ğŸ¨ æ ¼å¼åŒ–ä»£ç ..."
	uv run black .

# ä»£ç æ£€æŸ¥
.PHONY: lint
lint:
	@echo "ğŸ” ä»£ç æ£€æŸ¥..."
	uv run flake8 .

# ç±»å‹æ£€æŸ¥
.PHONY: type-check
type-check:
	@echo "_typeDefinition ç±»å‹æ£€æŸ¥..."
	uv run mypy .

# æ¸…ç†ä¸´æ—¶æ–‡ä»¶
.PHONY: clean
clean:
	@echo "ğŸ§¹ æ¸…ç†ä¸´æ—¶æ–‡ä»¶..."
	rm -rf .venv
	rm -rf __pycache__
	rm -rf */__pycache__
	find . -type d -name ".pytest_cache" -exec rm -rf {} +
	find . -type f -name "*.pyc" -delete